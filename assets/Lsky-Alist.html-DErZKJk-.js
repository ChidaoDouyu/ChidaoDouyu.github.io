import{_ as s}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as a,d as n,o as t}from"./app-d2M0StPy.js";const i={};function l(p,e){return t(),a("div",null,e[0]||(e[0]=[n(`<h1 id="从零开始-lsky图床配合alist实现图片上云" tabindex="-1"><a class="header-anchor" href="#从零开始-lsky图床配合alist实现图片上云"><span>从零开始：Lsky图床配合Alist实现图片上云</span></a></h1><div class="hint-container caution"><p class="hint-container-title">警告</p><p>本教程仅引导用户完成图片上云以及保证图片可见性。<br> 请自行确认Alist列表的安全性。初次部署请尽快查阅其他教程并调整配置。</p></div><p>众所周知，大家都有属于自己的图床，但很少有人有足够的硬盘空间存放图床中的大量图片文件。而Alist就可以救各位于水火之中。<br> Alist是一款网盘列表软件。可用于代理网盘，建立本地与网盘的通路，将图片代理到网盘中，充分利用网盘空间。<br> 本教程将以Lsky图床为例，逐步讲解部署过程，实现图片上云。</p><h2 id="一、部署alist" tabindex="-1"><a class="header-anchor" href="#一、部署alist"><span>一、部署Alist</span></a></h2><h3 id="通过脚本自动安装alist" tabindex="-1"><a class="header-anchor" href="#通过脚本自动安装alist"><span>通过脚本自动安装Alist</span></a></h3><ol><li>人帅心善的主播给你们把下载命令搬过来了。(于2025/2/13编辑)<br><code>curl -fsSL &quot;https://alist.nn.ci/v3.sh&quot; -o v3.sh &amp;&amp; bash v3.sh</code></li><li>跟随脚本引导，进行部署<br><img src="https://alist.nn.ci/img/guide/v3-install.png" alt="" loading="lazy"></li><li>部署结束后，将展示的信息记下(默认端口为5244)。建议直接将随机密码改为常用密码。<br> 注：离开该页面后也可通过alist命令配置Alist<br><img src="http://pic.puremcs.top/img/2025/02/13/67ae070f124de.png" alt="" loading="lazy"><br> 图源: <a href="https://blog.hanhanz.top" target="_blank" rel="noopener noreferrer">憨憨博客</a></li></ol><h3 id="配置alist挂载网盘" tabindex="-1"><a class="header-anchor" href="#配置alist挂载网盘"><span>配置Alist挂载网盘</span></a></h3><ol start="4"><li>在浏览器进入Alist网页。例如：<a href="https://example.com:5244" target="_blank" rel="noopener noreferrer">https://example.com:5244</a><br><img src="http://pic.puremcs.top/img/2025/02/13/67ae08467845c.png" alt="" loading="lazy"><br> 图源: <a href="https://blog.hanhanz.top" target="_blank" rel="noopener noreferrer">憨憨博客</a></li><li>输入第2步记录的账号密码，进入系统。<br><img src="http://pic.puremcs.top/img/2025/02/13/67ae14b7e8cb8.png" alt="" loading="lazy"></li><li>点击下方管理，左侧储存，开始添加新云盘<br><img src="http://pic.puremcs.top/img/2025/02/13/67ae14f094647.jpg" alt="" loading="lazy"></li><li>选择云盘运营商 挂载位置选择/image即可<br><img src="http://pic.puremcs.top/img/2025/02/13/67ae1576ab3ef.png" alt="" loading="lazy"></li><li>按照<a href="https://alist.nn.ci/zh/guide/" target="_blank" rel="noopener noreferrer"><strong>Alist文档指示</strong></a>进行剩余配置，告诉你的运营商你是你<br><img src="http://pic.puremcs.top/img/2025/02/13/67ae15cac7487.png" alt="" loading="lazy"></li></ol><h3 id="赋予webdav权限" tabindex="-1"><a class="header-anchor" href="#赋予webdav权限"><span>赋予WebDav权限</span></a></h3><ol start="9"><li>调整admin账号权限，勾选<strong>WebDav读取和管理</strong>两项后<strong>保存</strong>。<br><img src="http://pic.puremcs.top/img/2025/02/13/67ae16326bf65.png" alt="" loading="lazy"></li><li>进入 设置 -&gt; 全局，取消勾选&quot;签名所有&quot;后<strong>保存</strong>。<br><img src="http://pic.puremcs.top/img/2025/02/15/67af8db14b7f6.png" alt="" loading="lazy"></li></ol><h2 id="二、部署lsky图床" tabindex="-1"><a class="header-anchor" href="#二、部署lsky图床"><span>二、部署Lsky图床</span></a></h2><p>测试机通过1Panel面板应用商店自动部署。<br> 鉴于图床不唯一，本教程不作解释，请自行选择你需要的图床。<br> 有问题请自行搜索。</p><h2 id="三、修改nginx配置项" tabindex="-1"><a class="header-anchor" href="#三、修改nginx配置项"><span>三、修改Nginx配置项</span></a></h2><ol start="0"><li>提前下载nginx</li><li>打开/etc/nginx/nginx.json</li><li>在http框内添加以下内容</li></ol><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>    #Lsky Pro | Image Hub</span></span>
<span class="line"><span>    server {</span></span>
<span class="line"><span>        listen 80;</span></span>
<span class="line"><span>        # listen 443 ssl;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>        # HTTPS 需要指定 SSL/TLS 证书路径</span></span>
<span class="line"><span>        # 证书自行准备</span></span>
<span class="line"><span>        # ssl_certificate 公钥;</span></span>
<span class="line"><span>        # ssl_certificate_key 私钥;</span></span>
<span class="line"><span>        # ssl_session_cache shared:SSL:1m;</span></span>
<span class="line"><span>        # ssl_session_timeout 5m;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>        server_name 本机域名;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>        # 转发图床服务请求</span></span>
<span class="line"><span>        # 转发端口替换为Lsky外部端口</span></span>
<span class="line"><span>        location / {</span></span>
<span class="line"><span>            proxy_pass http://本机域名:转发端口;</span></span>
<span class="line"><span>            proxy_set_header Host $host:$server_port; # 向目标端口传递正确的请求头</span></span>
<span class="line"><span>            proxy_read_timeout 600s;</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>        # 转发 AList 图片直链访问请求</span></span>
<span class="line"><span>        # 直链端口替换为Alist端口</span></span>
<span class="line"><span>        location /img {</span></span>
<span class="line"><span>            proxy_pass http://本机域名:直链端口/d/image;</span></span>
<span class="line"><span>            proxy_read_timeout 600s;</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span>    }</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="四、配置图床存储策略" tabindex="-1"><a class="header-anchor" href="#四、配置图床存储策略"><span>四、配置图床存储策略</span></a></h2><h3 id="创建云盘策略" tabindex="-1"><a class="header-anchor" href="#创建云盘策略"><span>创建云盘策略</span></a></h3><ol><li>新建存储策略</li><li>修改策略配置并选中用户组</li></ol><table><thead><tr><th>配置项</th><th>内容</th><th>说明</th></tr></thead><tbody><tr><td>名称</td><td>xx云盘</td><td></td></tr><tr><td>储存策略</td><td>WebDav</td><td></td></tr><tr><td>访问域名</td><td><a href="http://example.com/img" target="_blank" rel="noopener noreferrer">example.com/img</a></td><td></td></tr><tr><td>连接地址</td><td><a href="http://example.com" target="_blank" rel="noopener noreferrer">example.com</a>:直链端口</td><td></td></tr><tr><td>认证方式</td><td>Basic</td><td>不可以换其他的</td></tr><tr><td>路径前缀</td><td>/dav/image</td><td></td></tr><tr><td>用户名</td><td>admin</td><td>此处的用户必须有WebDav访问权限！跟着步骤做就不会漏。详见<a href="#%E4%B8%80-%E9%83%A8%E7%BD%B2Alist">一、部署Alist</a></td></tr><tr><td>密码</td><td>设定的密码</td><td>忘记了就用<code>alist</code>引导脚本重置一下</td></tr></tbody></table><p><img src="http://pic.puremcs.top/img/2025/02/14/67ae177b60c23.png" alt="" loading="lazy"><br><strong>图片仅作示例，请按实际情况填写。</strong></p><h3 id="取消默认策略" tabindex="-1"><a class="header-anchor" href="#取消默认策略"><span>取消默认策略</span></a></h3><ol start="3"><li>配置默认本地存储策略。取消选中所有用户组。(或删除本地存储策略)<br><img src="http://pic.puremcs.top/img/2025/02/14/67ae1805182ec.png" alt="" loading="lazy"></li><li>配置完成！</li></ol><blockquote><p>参考文章：<a href="https://juejin.cn/post/7231740010986242104" target="_blank" rel="noopener noreferrer">AList+云盘+LskyPro · 搭建大容量图床服务</a><br> 作者：<a href="https://juejin.cn/user/2647279728860456/posts" target="_blank" rel="noopener noreferrer">Yoga0815</a><br> 来源：稀土掘金</p></blockquote><blockquote><p>参考文章：<a href="https://www.cnblogs.com/kevingrace/p/8269955.html" target="_blank" rel="noopener noreferrer">Nginx反向代理中proxy_set_header参数说明</a><br> 作者：<a href="https://home.cnblogs.com/u/kevingrace/" target="_blank" rel="noopener noreferrer">散尽浮华</a><br> 来源：博客园</p></blockquote><blockquote><p>参考文章：<a href="https://blog.imzjw.cn/posts/alist-pic/index.html" target="_blank" rel="noopener noreferrer">使用 Alist WebDav 搭建图床服务</a><br> 作者：<a href="https://blog.imzjw.cn/" target="_blank" rel="noopener noreferrer">小嘉</a></p></blockquote>`,25)]))}const o=s(i,[["render",l],["__file","Lsky-Alist.html.vue"]]),d=JSON.parse('{"path":"/computer/Lsky-Alist.html","title":"从零开始：Lsky图床配合Alist实现图片上云","lang":"zh-CN","frontmatter":{"article":true,"order":-999,"description":"从零开始：Lsky图床配合Alist实现图片上云 警告 本教程仅引导用户完成图片上云以及保证图片可见性。 请自行确认Alist列表的安全性。初次部署请尽快查阅其他教程并调整配置。 众所周知，大家都有属于自己的图床，但很少有人有足够的硬盘空间存放图床中的大量图片文件。而Alist就可以救各位于水火之中。 Alist是一款网盘列表软件。可用于代理网盘，建立...","head":[["meta",{"property":"og:url","content":"http://blog.puremcs.top/computer/Lsky-Alist.html"}],["meta",{"property":"og:site_name","content":"迟到的博客"}],["meta",{"property":"og:title","content":"从零开始：Lsky图床配合Alist实现图片上云"}],["meta",{"property":"og:description","content":"从零开始：Lsky图床配合Alist实现图片上云 警告 本教程仅引导用户完成图片上云以及保证图片可见性。 请自行确认Alist列表的安全性。初次部署请尽快查阅其他教程并调整配置。 众所周知，大家都有属于自己的图床，但很少有人有足够的硬盘空间存放图床中的大量图片文件。而Alist就可以救各位于水火之中。 Alist是一款网盘列表软件。可用于代理网盘，建立..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://alist.nn.ci/img/guide/v3-install.png"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-02-15T08:44:49.000Z"}],["meta",{"property":"article:modified_time","content":"2025-02-15T08:44:49.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"从零开始：Lsky图床配合Alist实现图片上云\\",\\"image\\":[\\"https://alist.nn.ci/img/guide/v3-install.png\\",\\"http://pic.puremcs.top/img/2025/02/13/67ae070f124de.png\\",\\"http://pic.puremcs.top/img/2025/02/13/67ae08467845c.png\\",\\"http://pic.puremcs.top/img/2025/02/13/67ae14b7e8cb8.png\\",\\"http://pic.puremcs.top/img/2025/02/13/67ae14f094647.jpg\\",\\"http://pic.puremcs.top/img/2025/02/13/67ae1576ab3ef.png\\",\\"http://pic.puremcs.top/img/2025/02/13/67ae15cac7487.png\\",\\"http://pic.puremcs.top/img/2025/02/13/67ae16326bf65.png\\",\\"http://pic.puremcs.top/img/2025/02/15/67af8db14b7f6.png\\",\\"http://pic.puremcs.top/img/2025/02/14/67ae177b60c23.png\\",\\"http://pic.puremcs.top/img/2025/02/14/67ae1805182ec.png\\"],\\"dateModified\\":\\"2025-02-15T08:44:49.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"ChidaoDouyu\\",\\"url\\":\\"https://github.com/ChidaoDouyu\\"}]}"]]},"headers":[{"level":2,"title":"一、部署Alist","slug":"一、部署alist","link":"#一、部署alist","children":[{"level":3,"title":"通过脚本自动安装Alist","slug":"通过脚本自动安装alist","link":"#通过脚本自动安装alist","children":[]},{"level":3,"title":"配置Alist挂载网盘","slug":"配置alist挂载网盘","link":"#配置alist挂载网盘","children":[]},{"level":3,"title":"赋予WebDav权限","slug":"赋予webdav权限","link":"#赋予webdav权限","children":[]}]},{"level":2,"title":"二、部署Lsky图床","slug":"二、部署lsky图床","link":"#二、部署lsky图床","children":[]},{"level":2,"title":"三、修改Nginx配置项","slug":"三、修改nginx配置项","link":"#三、修改nginx配置项","children":[]},{"level":2,"title":"四、配置图床存储策略","slug":"四、配置图床存储策略","link":"#四、配置图床存储策略","children":[{"level":3,"title":"创建云盘策略","slug":"创建云盘策略","link":"#创建云盘策略","children":[]},{"level":3,"title":"取消默认策略","slug":"取消默认策略","link":"#取消默认策略","children":[]}]}],"git":{"createdTime":1739463182000,"updatedTime":1739609089000,"contributors":[{"name":"ChidaoDouyu","email":"3114680870@qq.com","commits":7}]},"readingTime":{"minutes":3.26,"words":978},"filePathRelative":"computer/Lsky-Alist.md","localizedDate":"2025年2月13日","excerpt":"","autoDesc":true}');export{o as comp,d as data};
